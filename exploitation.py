import datetime
from datetime import datetime, timedelta
import matplotlib.pyplot as plt

nb_bases = 7

ignored = [1]

bases = []
times = []

for i in range(nb_bases):
    bases.append([])
    times.append([])

for i in range(nb_bases):
    if i+1 in ignored:
        continue
    with open(f"base{i+1}.txt", "r") as f:
        line="1"
        while line:
            line=f.readline()
            sp = line.replace("\n", "").split(",")
            if len(sp) >= 2:
                times[i].append(datetime.fromtimestamp(int(sp[0])))
                bases[i].append(float(sp[1]))


plt.figure(0, figsize=(20,14))

for i in range(nb_bases):
    if i+i in ignored:
        continue
    plt.plot(times[i], bases[i], "o", markersize=5.0)

plt.xlim([datetime.now() + timedelta(days=-1), datetime.now() + timedelta(minutes=30)])
# plt.show()
plt.savefig("24hours.png")

plt.xlim([datetime.now() + timedelta(hours=-12), datetime.now() + timedelta(minutes=30)])
plt.savefig("12hours.png")

plt.xlim([datetime.now() + timedelta(days=-5), datetime.now() + timedelta(hours=1)])
plt.savefig("5days.png")
